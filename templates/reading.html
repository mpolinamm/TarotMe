{% extends "base.html" %}
{% block content %}
<h2>Your Tarot Reading</h2>

<div class="d-flex justify-content-center gap-4 flex-wrap mt-4">
  {% for card in cards %}
  <div class="card bg-dark border-light" style="width: 12rem;">
    <img
      src="{{ url_for('static', filename='images/cards/' + card.image) }}"
      class="card-img-top {% if card.reversed %}reversed{% endif %}"
      alt="{{ card.name }}"
    />
    <div class="card-body">
      <h5 class="card-title">{{ card.name }}</h5>
      <p class="card-text">
        {{ card.upright if not card.reversed else card.reversed }}
      </p>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Loading overlay -->
<div id="loading-overlay">
  <div class="spinner-border text-light" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p class="mt-3">Consulting the mystical forces...</p>
</div>

<!-- AI Reading Section -->
<div id="reading-result" class="mt-5 p-4 bg-secondary bg-opacity-25 rounded-3 d-none">
  <h4>AI Interpretation</h4>
  <p class="fst-italic">{{ ai_reading }}</p>
</div>

<a href="{{ url_for('draw_cards') }}" class="btn btn-secondary mt-4">Draw Again</a>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Simulate a short delay to show the spinner until page fully loads
    const loading = document.getElementById("loading-overlay");
    const result = document.getElementById("reading-result");

    // Wait 1 second (for smoother visual), then show result
    setTimeout(() => {
      loading.style.display = "none";
      result.classList.remove("d-none");
    }, 1000);
  });
</script>
{% endblock %}